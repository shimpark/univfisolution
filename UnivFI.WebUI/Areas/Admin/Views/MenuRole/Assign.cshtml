@using UnivFI.WebUI.Areas.Admin.ViewModels.MenuRole
@model MenuRoleAssignViewModel
@{
    ViewData["Title"] = "역할 할당";
}

<div class="container mx-auto px-4 py-6">
    <h1 class="text-2xl font-bold mb-4">메뉴에 역할 할당</h1>
    <div class="h-0.5 bg-gray-200 w-full mb-6"></div>

    <div class="max-w-3xl mx-auto">
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="bg-blue-600 text-white px-6 py-4">
                <h2 class="font-semibold text-lg">메뉴 및 역할 선택</h2>
            </div>
            <div class="p-6">
                <form asp-action="Assign" method="post">
                    <div asp-validation-summary="ModelOnly" class="text-red-500 mb-4"></div>

                    <div class="mb-4">
                        <label asp-for="MenuId" class="block text-gray-700 font-medium mb-2">메뉴</label>
                        <select asp-for="MenuId" asp-items="Model.Menus"
                            class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">-- 메뉴 선택 --</option>
                        </select>
                        <span asp-validation-for="MenuId" class="text-red-500 text-sm"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="RoleId" class="block text-gray-700 font-medium mb-2">역할</label>
                        <select asp-for="RoleId" asp-items="Model.Roles"
                            class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">-- 역할 선택 --</option>
                        </select>
                        <span asp-validation-for="RoleId" class="text-red-500 text-sm"></span>
                    </div>

                    <!-- 페이징 및 검색 상태 유지를 위한 히든 필드 -->
                    <input type="hidden" name="returnPage" value="@ViewBag.ReturnPage" />
                    <input type="hidden" name="returnPageSize" value="@ViewBag.ReturnPageSize" />
                    <input type="hidden" name="returnSearchTerm" value="@ViewBag.ReturnSearchTerm" />
                    <input type="hidden" name="returnSearchFields" value="@ViewBag.ReturnSearchFields" />

                    <div class="flex justify-between mt-6">
                        <a asp-action="Index" asp-route-page="@ViewBag.ReturnPage"
                            asp-route-pageSize="@ViewBag.ReturnPageSize"
                            asp-route-searchTerm="@ViewBag.ReturnSearchTerm"
                            asp-route-searchFields="@ViewBag.ReturnSearchFields"
                            class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors">
                            <i class="fas fa-arrow-left mr-1"></i> 돌아가기
                        </a>
                        <button type="submit"
                            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">
                            <i class="fas fa-check-circle mr-1"></i> 할당
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}